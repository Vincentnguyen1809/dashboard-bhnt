<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ActivityLog React Component - Demo</title>

  <!-- Load React, ReactDOM, and Babel from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f3f4f6;
      padding: 2rem;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      padding: 2rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }

    .demo-controls {
      margin-bottom: 2rem;
      padding: 1rem;
      background: #f9fafb;
      border-radius: 6px;
    }

    .demo-controls h2 {
      margin-bottom: 1rem;
      font-size: 1.25rem;
    }

    .demo-controls button {
      padding: 0.5rem 1rem;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 500;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .demo-controls button:hover {
      background: #2563eb;
    }

    .code-block {
      background: #1e293b;
      color: #e2e8f0;
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
      line-height: 1.6;
      margin: 1rem 0;
    }

    .code-block .keyword {
      color: #c792ea;
    }

    .code-block .string {
      color: #c3e88d;
    }

    .code-block .function {
      color: #82aaff;
    }

    .code-block .comment {
      color: #546e7a;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 style="margin-bottom: 1rem;">ActivityLog Component - React Demo</h1>
    <p style="color: #6b7280; margin-bottom: 2rem;">
      This is a live demo of the ActivityLog React component with proper event handlers.
    </p>
  </div>

  <!-- React App Container -->
  <div id="root"></div>

  <!-- React Component Implementation -->
  <script type="text/babel">
    const { useState } = React;

    // ============================================================================
    // ACTIVITYLOG COMPONENT (Copy this to your project)
    // ============================================================================
    const ActivityLog = ({ activities = [], itemsPerPage = 10 }) => {
      // State for current page
      const [currentPage, setCurrentPage] = useState(1);

      // Constants
      const ITEMS_PER_PAGE = itemsPerPage;

      // Calculate total pages
      const totalPages = Math.ceil(activities.length / ITEMS_PER_PAGE);

      // Get current page data using slice
      const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
      const endIndex = startIndex + ITEMS_PER_PAGE;
      const currentData = activities.slice(startIndex, endIndex);

      // Handle page change
      const handlePageChange = (pageNumber) => {
        if (pageNumber >= 1 && pageNumber <= totalPages) {
          setCurrentPage(pageNumber);
        }
      };

      // Handle previous page
      const handlePrevious = () => {
        if (currentPage > 1) {
          setCurrentPage(currentPage - 1);
        }
      };

      // Handle next page
      const handleNext = () => {
        if (currentPage < totalPages) {
          setCurrentPage(currentPage + 1);
        }
      };

      // Generate page numbers with ellipsis
      const getPageNumbers = () => {
        const pages = [];

        if (totalPages <= 7) {
          for (let i = 1; i <= totalPages; i++) {
            pages.push(i);
          }
        } else {
          pages.push(1);
          if (currentPage > 3) pages.push('...');

          const start = Math.max(2, currentPage - 1);
          const end = Math.min(totalPages - 1, currentPage + 1);

          for (let i = start; i <= end; i++) {
            if (!pages.includes(i)) pages.push(i);
          }

          if (currentPage < totalPages - 2) pages.push('...');
          if (!pages.includes(totalPages)) pages.push(totalPages);
        }

        return pages;
      };

      // Format timestamp
      const formatTimestamp = (timestamp) => {
        if (!timestamp) return '-';
        try {
          const date = timestamp instanceof Date ? timestamp : new Date(timestamp);
          return date.toLocaleString('en-US', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
          });
        } catch (error) {
          return String(timestamp);
        }
      };

      // Get status styling
      const getStatusStyle = (status) => {
        const statusMap = {
          completed: { color: '#059669', label: 'Completed' },
          edited: { color: '#2563eb', label: 'Edited' },
          deleted: { color: '#dc2626', label: 'Deleted' },
          created: { color: '#9333ea', label: 'Created' },
          updated: { color: '#d97706', label: 'Updated' },
          pending: { color: '#4b5563', label: 'Pending' }
        };
        return statusMap[status] || { color: '#4b5563', label: status };
      };

      const pageNumbers = getPageNumbers();
      const showingStart = activities.length > 0 ? startIndex + 1 : 0;
      const showingEnd = Math.min(endIndex, activities.length);

      return (
        <div className="activity-log-wrapper" style={{ width: '100%' }}>
          <div className="activity-log-header" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>
            <h3 style={{ margin: 0, fontSize: '1.25rem', fontWeight: '600' }}>Activity Log</h3>
            <span style={{ color: '#6b7280', fontSize: '0.875rem' }}>
              {activities.length > 0 ? `Showing ${showingStart}-${showingEnd} of ${activities.length}` : 'No activities'}
            </span>
          </div>

          <div style={{ overflowX: 'auto', marginBottom: '1rem' }}>
            <table style={{ width: '100%', borderCollapse: 'collapse', backgroundColor: 'white', borderRadius: '8px', overflow: 'hidden' }}>
              <thead>
                <tr>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', fontWeight: '600', borderBottom: '2px solid #e5e7eb', fontSize: '0.875rem', color: '#374151' }}>ID</th>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', fontWeight: '600', borderBottom: '2px solid #e5e7eb', fontSize: '0.875rem', color: '#374151' }}>Content</th>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', fontWeight: '600', borderBottom: '2px solid #e5e7eb', fontSize: '0.875rem', color: '#374151' }}>User</th>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', fontWeight: '600', borderBottom: '2px solid #e5e7eb', fontSize: '0.875rem', color: '#374151' }}>Timestamp</th>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', fontWeight: '600', borderBottom: '2px solid #e5e7eb', fontSize: '0.875rem', color: '#374151' }}>Status</th>
                </tr>
              </thead>
              <tbody>
                {currentData.length === 0 ? (
                  <tr>
                    <td colSpan="5" style={{ textAlign: 'center', padding: '2rem', color: '#9ca3af' }}>No activities found</td>
                  </tr>
                ) : (
                  currentData.map((activity, index) => {
                    const statusInfo = getStatusStyle(activity.status);
                    return (
                      <tr key={activity.id || index} style={{ transition: 'background-color 0.2s' }}>
                        <td style={{ padding: '0.75rem', borderBottom: '1px solid #f3f4f6', fontSize: '0.875rem' }}>{activity.id || '-'}</td>
                        <td style={{ padding: '0.75rem', borderBottom: '1px solid #f3f4f6', fontSize: '0.875rem' }}>{activity.content || '-'}</td>
                        <td style={{ padding: '0.75rem', borderBottom: '1px solid #f3f4f6', fontSize: '0.875rem' }}>{activity.user || '-'}</td>
                        <td style={{ padding: '0.75rem', borderBottom: '1px solid #f3f4f6', fontSize: '0.875rem' }}>{formatTimestamp(activity.timestamp)}</td>
                        <td style={{ padding: '0.75rem', borderBottom: '1px solid #f3f4f6', fontSize: '0.875rem' }}>
                          <span style={{ color: statusInfo.color, fontWeight: '500' }}>{statusInfo.label}</span>
                        </td>
                      </tr>
                    );
                  })
                )}
              </tbody>
            </table>
          </div>

          {totalPages > 1 && (
            <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center', justifyContent: 'center', marginTop: '1rem' }}>
              <button onClick={handlePrevious} disabled={currentPage === 1} style={{ padding: '0.5rem 1rem', backgroundColor: currentPage === 1 ? '#e5e7eb' : 'white', border: '1px solid #d1d5db', borderRadius: '6px', cursor: currentPage === 1 ? 'not-allowed' : 'pointer', fontSize: '0.875rem', fontWeight: '500', color: '#374151', opacity: currentPage === 1 ? 0.5 : 1 }}>
                Previous
              </button>

              {pageNumbers.map((page, index) => {
                if (page === '...') {
                  return <span key={`ellipsis-${index}`} style={{ color: '#9ca3af', padding: '0.5rem' }}>...</span>;
                }
                const isActive = page === currentPage;
                return (
                  <button key={page} onClick={() => handlePageChange(page)} disabled={isActive} style={{ padding: '0.5rem 1rem', backgroundColor: isActive ? '#3b82f6' : 'white', color: isActive ? 'white' : '#374151', border: '1px solid ' + (isActive ? '#3b82f6' : '#d1d5db'), borderRadius: '6px', cursor: isActive ? 'default' : 'pointer', fontSize: '0.875rem', fontWeight: '500', minWidth: '40px' }}>
                    {page}
                  </button>
                );
              })}

              <button onClick={handleNext} disabled={currentPage === totalPages} style={{ padding: '0.5rem 1rem', backgroundColor: currentPage === totalPages ? '#e5e7eb' : 'white', border: '1px solid #d1d5db', borderRadius: '6px', cursor: currentPage === totalPages ? 'not-allowed' : 'pointer', fontSize: '0.875rem', fontWeight: '500', color: '#374151', opacity: currentPage === totalPages ? 0.5 : 1 }}>
                Next
              </button>
            </div>
          )}
        </div>
      );
    };

    // ============================================================================
    // DEMO APP
    // ============================================================================
    const App = () => {
      // Sample data generator
      const generateSampleActivities = (count) => {
        const users = ['John Doe', 'Jane Smith', 'Bob Johnson', 'Alice Williams', 'Charlie Brown'];
        const statuses = ['completed', 'edited', 'deleted', 'created', 'updated', 'pending'];
        const actions = ['Task updated', 'Task completed', 'Task deleted', 'Comment added', 'Status changed', 'Priority modified', 'Assignment changed', 'Due date updated'];

        const activities = [];
        for (let i = 1; i <= count; i++) {
          activities.push({
            id: `ACT-${String(i).padStart(5, '0')}`,
            content: actions[Math.floor(Math.random() * actions.length)],
            user: users[Math.floor(Math.random() * users.length)],
            timestamp: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000),
            status: statuses[Math.floor(Math.random() * statuses.length)]
          });
        }
        return activities;
      };

      const [activities, setActivities] = useState(generateSampleActivities(50));

      return (
        <div>
          <div className="container">
            <div className="demo-controls">
              <h2>Demo Controls</h2>
              <button onClick={() => setActivities(generateSampleActivities(10))}>Load 10 Activities</button>
              <button onClick={() => setActivities(generateSampleActivities(50))}>Load 50 Activities</button>
              <button onClick={() => setActivities(generateSampleActivities(100))}>Load 100 Activities</button>
              <button onClick={() => setActivities([])}>Clear All</button>
            </div>

            <ActivityLog activities={activities} itemsPerPage={10} />
          </div>

          <div className="container">
            <h2 style={{ marginBottom: '1rem' }}>âœ… Key Features</h2>
            <ul style={{ marginLeft: '1.5rem', lineHeight: '1.8' }}>
              <li>âœ… <strong>Proper React State:</strong> Uses <code>useState(1)</code></li>
              <li>âœ… <strong>Client-side Pagination:</strong> 10 items per page</li>
              <li>âœ… <strong>Correct Event Binding:</strong> <code>onClick={() => setCurrentPage(page)}</code></li>
              <li>âœ… <strong>Data Slicing:</strong> <code>activities.slice(startIndex, endIndex)</code></li>
              <li>âœ… <strong>No ReferenceError:</strong> All handlers are properly scoped</li>
              <li>âœ… <strong>Smart Pagination:</strong> Shows ellipsis for large datasets</li>
              <li>âœ… <strong>Responsive Design:</strong> Works on all screen sizes</li>
            </ul>

            <h2 style={{ marginTop: '2rem', marginBottom: '1rem' }}>ðŸ“¦ Usage</h2>
            <div className="code-block">
              <span className="keyword">import</span> React <span className="keyword">from</span> <span className="string">'react'</span>;<br/>
              <span className="keyword">import</span> ActivityLog <span className="keyword">from</span> <span className="string">'./ActivityLog'</span>;<br/>
              <br/>
              <span className="keyword">function</span> <span className="function">App</span>() {'{'}<br/>
              &nbsp;&nbsp;<span className="keyword">const</span> activities = [<br/>
              &nbsp;&nbsp;&nbsp;&nbsp;{'{ id: \'1\', content: \'Task completed\', user: \'John\', timestamp: new Date(), status: \'completed\' }'},<br/>
              &nbsp;&nbsp;&nbsp;&nbsp;<span className="comment">// ... more activities</span><br/>
              &nbsp;&nbsp;];<br/>
              <br/>
              &nbsp;&nbsp;<span className="keyword">return</span> {'<'}<span className="function">ActivityLog</span> activities={'{activities}'} itemsPerPage={'{10}'} />{'>'};<br/>
              {'}'}
            </div>

            <h2 style={{ marginTop: '2rem', marginBottom: '1rem' }}>ðŸ”§ Props</h2>
            <table style={{ width: '100%', borderCollapse: 'collapse' }}>
              <thead>
                <tr>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', borderBottom: '2px solid #e5e7eb' }}>Prop</th>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', borderBottom: '2px solid #e5e7eb' }}>Type</th>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', borderBottom: '2px solid #e5e7eb' }}>Default</th>
                  <th style={{ background: '#f9fafb', padding: '0.75rem', textAlign: 'left', borderBottom: '2px solid #e5e7eb' }}>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}><code>activities</code></td>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}>Array</td>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}>[]</td>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}>Array of activity objects</td>
                </tr>
                <tr>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}><code>itemsPerPage</code></td>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}>Number</td>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}>10</td>
                  <td style={{ padding: '0.75rem', borderBottom: '1px solid #e5e7eb' }}>Number of items per page</td>
                </tr>
              </tbody>
            </table>

            <h2 style={{ marginTop: '2rem', marginBottom: '1rem' }}>ðŸ“Š Data Format</h2>
            <div className="code-block">
              {'{'}<br/>
              &nbsp;&nbsp;id: <span className="string">'ACT-001'</span>,<br/>
              &nbsp;&nbsp;content: <span className="string">'Task completed'</span>,<br/>
              &nbsp;&nbsp;user: <span className="string">'John Doe'</span>,<br/>
              &nbsp;&nbsp;timestamp: <span className="keyword">new Date</span>(),<br/>
              &nbsp;&nbsp;status: <span className="string">'completed'</span> <span className="comment">// completed|edited|deleted|created|updated|pending</span><br/>
              {'}'}
            </div>
          </div>
        </div>
      );
    };

    // Render the app
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
